
var grobjects = grobjects || [];

var Volcano = undefined;

(function() {
    "use strict";

    var shaderProgram = undefined;
    var buffers = undefined;

// constructor for a mountain
    // this is mostly a test to see how creating a model in Google Sketchup works for importing into the project.
    Volcano = function Volcano(name, position, size) {
        this.name = name;
        this.position = position || [0,0,0];
        this.size = size || 1.0;
        this.color = [0.647,0.265,0.265];
    };
    Volcano.prototype.init = function(drawingState) {
        var gl=drawingState.gl;
        if (!shaderProgram) {
            shaderProgram = twgl.createProgramInfo(gl, ["cube-vs", "cube-fs"]);
        }
        if (!buffers) {
            var arrays = {
                vpos : { numComponents: 3, data: [
                    388.316457696734,0,289.087372505918,472.589389738998,113.96,145.752372505918,388.316457696734,284.9,52.3873725059178,513.587032354153,0,-217.187627494082,388.316457696734,0,-0.212627494082265,388.316457696734,0,-289.512627494082,638.857607011572,0,144.437372505918,556.862321781262,113.96,-0.212627494082187,433.869393935796,284.9,26.0873725059178,342.763521457673,284.9,-26.5126274940822,304.043525654471,113.96,-146.177627494082,137.775308381896,0,-144.862627494082,342.763521457673,284.9,26.0873725059178,219.770593612207,113.96,-0.212627494082333,137.775308381896,0,144.437372505918,137.775308381896,0,144.437372505918,304.043525654471,113.96,145.752372505918,342.763521457673,284.9,26.0873725059178,638.857607011572,0,-144.862627494082,472.589389738998,113.96,-146.177627494082,433.869393935796,284.9,-26.5126274940822,513.587032354153,0,216.762372505918,638.857607011572,0,144.437372505918,433.869393935796,284.9,26.0873725059178,638.857607011572,0,-144.862627494082,638.857607011572,0,-0.212627494082177,638.857607011572,0,144.437372505918,513.587032354153,0,216.762372505918,388.316457696734,0,289.087372505918,263.045883039315,0,216.762372505918,137.775308381896,0,144.437372505918,137.775308381896,0,-0.212627494082394,137.775308381896,0,-144.862627494082,263.045883039315,0,-217.187627494082,388.316457696734,284.9,-52.8126274940822,388.316457696734,0,-289.512627494082,263.045883039315,0,-217.187627494082,638.857607011572,0,144.437372505918,638.857607011572,0,-0.212627494082177,556.862321781262,113.96,-0.212627494082187,638.857607011572,0,-0.212627494082177,638.857607011572,0,-144.862627494082,556.862321781262,113.96,-0.212627494082187,638.857607011572,0,-144.862627494082,433.869393935796,284.9,-26.5126274940822,556.862321781262,113.96,-0.212627494082187,433.869393935796,284.9,-26.5126274940822,433.869393935796,284.9,26.0873725059178,556.862321781262,113.96,-0.212627494082187,513.587032354153,0,-217.187627494082,388.316457696734,0,-289.512627494082,388.316457696734,284.9,-52.8126274940822,263.045883039315,0,216.762372505918,
                    388.316457696734,0,289.087372505918,388.316457696734,284.9,52.3873725059178,342.763521457673,284.9,26.0873725059178,342.763521457673,284.9,-26.5126274940822,219.770593612207,113.96,-0.212627494082333,342.763521457673,284.9,-26.5126274940822,137.775308381896,0,-144.862627494082,219.770593612207,113.96,-0.212627494082333,137.775308381896,0,-144.862627494082,137.775308381896,0,-0.212627494082394,219.770593612207,113.96,-0.212627494082333,137.775308381896,0,-0.212627494082394,137.775308381896,0,144.437372505918,219.770593612207,113.96,-0.212627494082333
                ] },
                vnormal : {numComponents:3, data: [
                    0.405861576998107,0.584042396805607,0.70297287220075,0.405861576998107,0.584042396805607,0.70297287220075,0.405861576998107,0.584042396805607,0.70297287220075,0,-1,-0,0,-1,-0,0,-1,-0,0.811723153996214,0.584042396805607,9.82549250850733e-16,0.811723153996214,0.584042396805607,9.82549250850733e-16,0.811723153996214,0.584042396805607,9.82549250850733e-16,-0.405861576998107,0.584042396805607,-0.702972872200749,-0.405861576998107,0.584042396805607,-0.702972872200749,-0.405861576998107,0.584042396805607,-0.702972872200749,-0.811723153996214,0.584042396805607,-7.36911938138051e-16,-0.811723153996214,0.584042396805607,-7.36911938138051e-16,-0.811723153996214,0.584042396805607,-7.36911938138051e-16,-0.405861576998107,0.584042396805606,0.70297287220075,-0.405861576998107,0.584042396805606,0.70297287220075,-0.405861576998107,0.584042396805606,0.70297287220075,0.405861576998108,0.584042396805607,-0.702972872200749,0.405861576998108,0.584042396805607,-0.702972872200749,0.405861576998108,0.584042396805607,-0.702972872200749,0.405861576998107,0.584042396805607,0.70297287220075,0.405861576998107,0.584042396805607,0.70297287220075,0.405861576998107,0.584042396805607,0.70297287220075,0,-1,-0,0,-1,-0,0,-1,-0,0,-1,-0,0,-1,-0,0,-1,-0,0,-1,-0,0,-1,-0,0,-1,-0,0,-1,-0,-0.405861576998107,0.584042396805607,-0.702972872200749,-0.405861576998107,0.584042396805607,-0.70297287220075,-0.405861576998107,0.584042396805607,-0.70297287220075,0.811723153996215,0.584042396805607,-0,0.811723153996215,0.584042396805607,-0,0.811723153996215,0.584042396805607,-0,0.811723153996215,0.584042396805607,4.34242615061549e-17,0.811723153996215,0.584042396805607,4.34242615061549e-17,0.811723153996215,0.584042396805607,4.34242615061549e-17,0.811723153996214,0.584042396805607,-7.3691193813805e-16,0.811723153996214,0.584042396805607,-7.3691193813805e-16,0.811723153996214,0.584042396805607,-7.3691193813805e-16,0.811723153996214,0.584042396805607,1.24781499789871e-15,0.811723153996214,0.584042396805607,1.24781499789871e-15,0.811723153996214,0.584042396805607,1.24781499789871e-15,
                    0.405861576998107,0.584042396805607,-0.702972872200749,0.405861576998107,0.584042396805607,-0.70297287220075,0.405861576998107,0.584042396805607,-0.70297287220075,-0.405861576998107,0.584042396805607,0.702972872200749,-0.405861576998108,0.584042396805607,0.702972872200749,-0.405861576998107,0.584042396805607,0.702972872200749,-0.811723153996214,0.584042396805607,-1.22550453341491e-15,-0.811723153996214,0.584042396805607,-1.22550453341491e-15,-0.811723153996214,0.584042396805607,-1.22550453341491e-15,-0.811723153996214,0.584042396805607,-2.45637312712683e-16,-0.811723153996214,0.584042396805607,-2.45637312712683e-16,-0.811723153996214,0.584042396805607,-2.45637312712683e-16,-0.811723153996214,0.584042396805607,-3.90818353555394e-16,-0.811723153996214,0.584042396805607,-3.90818353555394e-16,-0.811723153996214,0.584042396805607,-3.90818353555394e-16,-0.811723153996214,0.584042396805607,-4.34242615061549e-16,-0.811723153996214,0.584042396805607,-4.34242615061549e-16,-0.811723153996214,0.584042396805607,-4.34242615061549e-16
                ]}
            };
            buffers = twgl.createBufferInfoFromArrays(drawingState.gl,arrays);
        }
    };
    Volcano.prototype.draw = function(drawingState) {
        for (var i = 0; i < 8; i++) {
            var modelM = twgl.m4.scaling([this.size,this.size,this.size]);
            twgl.m4.setTranslation(modelM,this.position,modelM);
            var gl = drawingState.gl;
            gl.useProgram(shaderProgram.program);
            twgl.setBuffersAndAttributes(gl,shaderProgram,buffers);
            twgl.setUniforms(shaderProgram,{
                view:drawingState.view, proj:drawingState.proj, lightdir:drawingState.sunDirection,
                cubecolor:this.color, model: modelM });
            twgl.drawBufferInfo(gl, gl.TRIANGLES, buffers);
        }
    };
    Volcano.prototype.center = function(drawingState) {
        return this.position;
    };
})();
// add a volcano
// This isn't quite correct yet so I'm not going to include it in this version
//grobjects.push(new Volcano("volcano1",[0,0,-7],0.2));